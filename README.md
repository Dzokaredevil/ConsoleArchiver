Эта программа используется для сжатия или распаковки файла. 
Исходный код построен в стиле API, вы можете легко написать собственный инструмент сжатия, 
используя кодировку Хаффмана.

Описание программы
---------------------------
Cжимает (и распаковывает) файл с использованием метода [Huffman coding] (http://en.wikipedia.org/wiki/Huffman_coding). 
Входной файл делится на обычный элемент с именем *block*, и этот блок имеет фиксированный размер с именем *block-size*, 
который по умолчанию равен 10 МБ. <br>
Коэффициент сжатия сам по себе не очень хорош, потому что использование только кода Хаффмана не очень эффективно в сравнение с другим инструментом вроде *bzip2* или *xz*. 
Минимальный сжатый размер составляет восемь из исходного размера ввода из-за характера кода Хаффмана, но это только добавляет, если ваш файл содержит один и тот же символ. <br>
<br>
Преимуществом этой программы является ее скорость:

  1. Это многопоточность, использующая API-интерфейс 
  2. Код Хаффмана легко вычисляется

Использование программы
-------------------

	ha input_filename -o output_filename
	
Это простой пример использования, но вы можете увидеть все параметры, набрав `ha -h`. С помощью этой командной строки вы сжимаете *input_filename*, 
используя размер блока 10 МБ, максимальное использование памяти в потоках 100 МБ и *n*, где *n* представляет количество ядер на вашем компьютере. <br>
Размер блока, максимальное использование памяти и количество потоков могут быть указаны либо непосредственно с помощью аргумента программы, либо с помощью переменной окружения.

Переменная среды
----------------------------
Если вы используете этот инструмент и у вас нет возможности установить параметр программы (например, если вы используете его с программой *tar*), вы можете установить их косвенно, используя следующую переменную среды:

 - **HA_THREAD**: установить количество потоков, которые необходимо использовать
 - **HA_BLOCK_SIZE**: установить значение размера блока
 - **HA_MEMLIMIT**: установить максимальное использование памяти

Использование с tar
-------------------
Эта программа совместима с архиватором *tar*, используя следующую командную строку:

     tar -I /path/to/ha -cf archive.tar.hc dir
Эта командная строка будет архивировать и сжимать каталог **dir** с помощью программы сжатия ha. <br>
Для распаковки вы можете использовать эту командную строку:

     tar -I /path/to/ha -xvf archive.tar.hc

Формат сжатого файла
-------------------------------

В этой таблице описывается формат сжатого файла. Файл написан в маленьком концевом порядке.

| Name           | Size in bytes | Value          | Description               |
| :------------- | ------------: | -------------: | :------------------------ |
| Magic number   | 4             | 0x52B5218B     | Use to recognize the file |
| Version major  | 1             | 1              | Current major version     |
| Version minor  | 1             | 0              | Current minor version     |
| Version patch  | 1             | 1              | Current patch version     |

С этой точки **all** поля повторяются до конца файла (**EOF**).

| Name           | Size in bytes | Value          | Description               |
| :------------- | ------------: | -------------: | :------------------------ |
| Block size     | 4             | --block-size   | The block size of each compressed block |
| CRC-32         | 4             | Depends data   | This crc is computed using all the following field |
| Number of leaf | 1             | Depends data   | Size of the Huffman tree  |

**2** следующие поля повторяются некоторое количество раз.

| Name           | Size in bytes | Value          | Description               |
| :------------- | ------------: | -------------: | :------------------------ |
| Weight         | 4             | Depends data   | Number of character in the block-size |
| Byte value     | 1             | 0 - 255        | Character corresponding to the weight |


| Name           | Size in bytes | Value          | Description               |
| :------------- | ------------: | -------------: | :------------------------ |
| Padding        | 1             | 0 - 7          | Number of padding bits at the end of the compressed memory |
| Memory size    | 4             | 0 - Block size | Size of the following compressed memory |
| Data           | memory size   | Depends data   | Compressed data           |